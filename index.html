<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="author" content="MORVAN Pierre"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./vendor/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="./css/slides.css" id="theme"/>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide">
<div class="page-title"><h1 id="title" style="width: 900px">Comment éviter des situations cocasses avec un travail d'architecture et de developpement sécurisé</h1><h2>MORVAN Pierre</h2></div>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<link href="css/slides.css" rel="stylesheet">
<title>Comment éviter des situations cocasses avec un travail d'architecture et de developpement sécurisé</title>

<div class="header-tf"><div id="label-container" style="text-align:center"></div></div>
<script src="vendor/tfjs.js"></script>
<script src="vendor/speech-commands.js"></script>
<script src="vendor/tf-backend-wasm.js"></script>
<script src="js/ml.js"></script>

<section>
<section id="slide-org589f4f1">
<h2 id="org589f4f1">WHO AM I?</h2>

<div id="org2161a64" class="figure">
<p><img src="./assets/pierre_znk.png" alt="pierre_znk.png" style="border-radius: 50%; margin: auto; display: block;" />
</p>
</div>
<p style="text-align: center">
Pierre Morvan @Zenika Paris
</p>
<p style="text-align: center">
@ryarnyah
</p>
<p style="text-align: center">
"Du Java mais pas que&#x2026;"
</p>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
</section>
<section>
<section id="slide-org68f23f6">
<h2 id="org68f23f6">ENCORE DES MICRO-SERVICES?!?</h2>

<div id="org3f57fd6" class="figure">
<p><object type="image/svg+xml" data="./assets/diagram-spring-cloud.svg" class="org-svg" style="margin: auto; display: block; width: 40%;">
Sorry, your browser does not support SVG.</object>
</p>
</div>

<div id="orgb9d887f" class="figure">
<p><img src="./assets/ingress-k8s.png" alt="ingress-k8s.png" style="margin: auto; display: block; width: 40%;" />
</p>
</div>
<aside class="notes">
<p>
Lors de ma courte carrière, j'ai rencontré pas mal de failles de sécurité et jamais plus que dernièrement avec l'arrivé des architectures micro-services et du cloud et de leur vision "forteresse" de l'infrastructure.
Tout le monde pense que tout est sécurisé by design, faute au marketing&#x2026;
Que ce soit dans les exemple ci-dessus avec Spring ou Kubernetes, l'architecture de base est la meme. Un pool de services accèssibles uniquement via une gateway (on avait la meme archi avant avec des LB&#x2026;).
Mais autant on savait faire avant avec une architecture similaire autant maintenant&#x2026; c'est discutable.
</p>

</aside>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-orgfe0711e">
<h3 id="orgfe0711e">SSRF OU COMMENT OUVRIR LA PORTE DE SON SI</h3>
<p>
SSR&#x2026; Quoi?
</p>

<div id="org560c33b" class="figure">
<p><object type="image/svg+xml" data="./assets/example-ssrf.svg" class="fragment (appear)" style="margin: auto; display: block; width: 80%;">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-orgaff0b3b">
<h3 id="orgaff0b3b">SSRF</h3>

<div id="orgc261ef4" class="figure">
<p><img src="./assets/ssrf-xxe.png" alt="ssrf-xxe.png" style="margin: auto; display: block; width: 90%;" />
</p>
</div>
<aside class="notes">
<p>
Cette histoire commence li ya a quelques temps. ce jour la un individu se dit que ça serai une bonne idée de rajouter Sonar au projet.
Il le rajoute et PAN c'est la déferlante! Et dans ce fatra d'annomalies il découvre des annomalies qui lui font froncer les sourcils?!?
XMLInputFactory &amp; TransformerFactory &amp; &#x2026;
En testant il se rend compte que depuis son navigateur il est en capacité de faire des requetes depuis le serveur et donc accèder aux resources exposés sur le 127.0.0.1.
Manque de bol, dans ces resources, on va retrouver une api exposant la configuration de l'application&#x2026;
</p>

</aside>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-orgcec97c0">
<h3 id="orgcec97c0">SSRF: COMMENT S'EN SORTIR?</h3>

<div id="org946c583" class="figure">
<p><object type="image/svg+xml" data="./assets/Questions-pana.svg" class="questions">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<aside class="notes">
<p>
Alors comment faire pour ne pas avoir ce genre de soucis?
Un WAF peu en effet diminuer la surface d'attaque mais le plus efficace reste juste de rajouter un peu d'analyse statique lors des developpements pour les XXE.
Après rien ne vaut une relecture humaine et une formation des equipes aux risques (une SSRF pouvant être une fonctionnalité voulue de l'application).
</p>

</aside>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-orgaafdeff">
<h3 id="orgaafdeff">MON SERVICE S'EST FAIT ATTAQUE!</h3>

<div id="org97e5319" class="figure">
<p><object type="image/svg+xml" data="./assets/service-mesh.svg" class="org-svg" style="margin: auto; display: block; width: 80%;">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<aside class="notes">
<p>
Mais la SSRF est loin d'etre le seul risque. Immaginous que vous avez un service qui est vulnerable et que l'attaquant arive a ouvrir une console sur celui-ci.
Que peut-on faire pour limiter la casse? Et oui tout cassera, tout sera un jour attaqué, tel est une façon de voir les choses.
</p>

</aside>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-org87ea1eb">
<h3 id="org87ea1eb">TLS? POURQUOI?</h3>
<ul>
<li>Limiter les interception réseau
<ul>
<li>Récupération de secrets (LDAP, accès DB, &#x2026;)</li>
<li>Réécriture des réponses</li>
<li>&#x2026;</li>

</ul></li>
<li>ARP spoofing</li>
<li>&#x2026;</li>

</ul>
<aside class="notes">
<p>
tout flux doit être chiffré.
Ne pas oublier de gérer des CRLs ou un répondeur OCSP
</p>

</aside>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-orgeb3729d">
<h3 id="orgeb3729d">Limiter au maximum les droits d'un process</h3>
<ul>
<li>Containers (SystemD sait aussi faire des containers!)</li>
<li>Capabilities</li>
<li>Users unix</li>
<li>&#x2026;</li>

</ul>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-org5cebabe">
<h3 id="org5cebabe">N'OUBLIONS PAS LE DNS</h3>
<ul>
<li>Ordre de résolution du DNS</li>
<li>DNS de fallback</li>

</ul>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-org7347dbb">
<h3 id="org7347dbb">Et ce n'est qu'un apperçu&#x2026;</h3>

<div id="orgd32da34" class="figure">
<p><object type="image/svg+xml" data="./assets/Programming-pana.svg" class="org-svg" style="margin: auto; display: block; width: 50%;">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
</section>
<section>
<section id="slide-orgeb91681">
<h2 id="orgeb91681">DEPENDENCY HELL</h2>

<div id="org05595d7" class="figure">
<p><object type="image/svg+xml" data="./assets/dep-hell.svg" class="org-svg" style="margin: auto; display: block; width: 95%;">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<aside class="notes">
<p>
Story telling:
Je vais vous raconter une histoire.
Qui n'a jamais eu de dépendances en double dans son projet?
Qui n'a jamais eu de ClassCastException ou de MethodNotFoundException?
</p>

<p>
Le module analysé c'est quarkus-neo4j au milleu.
</p>

</aside>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-orgb1c0d32">
<h3 id="orgb1c0d32">DEPENDENCY HELL</h3>

<div id="org1f93473" class="figure">
<p><img src="./assets/quarkus-extensions.png" alt="quarkus-extensions.png" style="margin: auto; display: block; width: 70%;" />
</p>
</div>
<aside class="notes">
<p>
Framework mis en avant pour l'écriture de nouveaux modules.
</p>

</aside>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-orge60a4a2">
<h3 id="orge60a4a2">DEPENDENCY HELL: COMMENT S'EN SORTIR?</h3>

<div id="org1afd5bc" class="figure">
<p><object type="image/svg+xml" data="./assets/Questions-pana.svg" class="questions">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-org35277f2">
<h3 id="org35277f2">DEPENDENCY HELL: DES OUTILS EN JAVA</h3>
<ul>
<li class="fragment appear">Des incontournables avec maven incontournables
<ul>
<li>Maven Enforcer Plugin</li>
<li>Maven Dependency Check</li>

</ul></li>
<li class="fragment appear">Des scans réguliers</li>
<li class="fragment appear">Mais c'est aussi une éducation des équipe</li>

</ul>
<aside class="notes">
<p>
Rajouter une dépendance c'est aussi rajouter ses dépendances.
</p>

</aside>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
</section>
<section>
<section id="slide-org9edd7d2">
<h2 id="org9edd7d2">UNE PETITE HISTOIRE DE CFT&#x2026;</h2>

<div id="org50cc704" class="figure">
<p><img src="./assets/cft.png" alt="cft.png" class="fragment (appear)" />
</p>
</div>

<div id="org059da3f" class="figure">
<p><img src="./assets/ghidra.png" alt="ghidra.png" style="margin: auto; display: block; width: 30%;" class="fragment (appear)" />
</p>
</div>
<aside class="notes">
<p>
C'est l'histoire d'un produit maison qui servait a faire de l'échange de fichier.
Celui-ci permettait de remplacer son ancetre CFT.
Il devait tout révolutionner.
Il était déployé de partout! (et depuis un certain temps)
Malheureusement celui-ci avait de graves érreurs de conception.
Et un jour un developpeur a eu besoin d'en comprendre le fonctionnement et a grand coup de Ghidra il a fouillé et a trouvé beaucoup de choses&#x2026;
Il implémentait son propre chiffrement (au diable AES)
Il exposait un serveur HTTP.
Il était écrit en C à la mode shell.
Il tournait avec des droits forts.
</p>

</aside>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-org72de7a4">
<h3 id="org72de7a4">GIDRA</h3>

<div id="orgeca8262" class="figure">
<p><img src="./assets/ghidra-ihm.png" alt="ghidra-ihm.png" style="margin: auto; display: block; width: 80%;" />
</p>
</div>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
</section>
<section>
<section id="slide-org6f108aa">
<h2 id="org6f108aa">ALORS COMMENT NE PAS EN ARRIVER LA?</h2>
<ul>
<li class="fragment appear">Former les équipes de developpement et les architectes.</li>
<li class="fragment appear">Mettre en place de bonnes pratiques de developpement.</li>
<li class="fragment appear">Intégrer la sécurité dans le processus de developpement.</li>
<li class="fragment appear">Penser à la sécurité "in-depth" dés la conception de l'architecture.</li>
<li class="fragment appear">Prendre du recul et toujours remettre en question les choix techniques sur toutes les phases d'un projet.</li>
<li class="fragment appear">Ne pas hésiter à chalenger un besoin métier si la sécurité est en jeu!</li>
<li class="fragment appear">Ne pas réinventer la roue!</li>

</ul>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
<section id="slide-orgffcc29e">
<h3 id="orgffcc29e">LES OUTILS MAISON</h3>
<ul>
<li class="fragment appear">Oui mais pas sans faire attention!</li>
<li class="fragment appear">Oui mais en réutilisant des élements existants</li>
<li class="fragment appear">Oui mais en connaissant le langage utilisé</li>
<li class="fragment appear">Oui mais en réalisant des audit du code réugliers de façon automatisé mais aussi humaine</li>
<li class="fragment appear">Oui mais uniquement si rien d'autre ne fait l'affaire!</li>

</ul>
<aside class="notes">
<p>
Ne pas hésiter a investir l'équipe ou les équipes a coté de soit pour s'auto-auditer
</p>

</aside>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
</section>
<section>
<section id="slide-org263962f">
<h2 id="org263962f">MERCI</h2>

<div id="orgb01976f" class="figure">
<p><object type="image/svg+xml" data="./assets/Questions-pana.svg" class="questions">
Sorry, your browser does not support SVG.</object>
</p>
</div>
<div class="slide-footer"><footer class="copyright">Event BPI</footer></div>
</section>
</section>
</div>
</div>
<script src="./vendor/reveal.js/dist/reveal.js"></script>
<script src="./vendor/reveal.js/plugin/markdown/markdown.js"></script>
<script src="./vendor/reveal.js/plugin/notes/notes.js"></script>
<script src="./vendor/reveal.js/plugin/search/search.js"></script>
<script src="./vendor/reveal.js/plugin/zoom/zoom.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: true,
slideNumber: 'c',
rollingLinks: true,
keyboard: true,
mouseWheel: false,
fragmentInURL: false,
hashOneBasedIndex: false,
pdfSeparateFragments: true,
overview: true,
width: 1420,
height: 800,
minScale: 0.70,
maxScale: 3.50,

transition: 'linear',
transitionSpeed: 'default',

// Plugins with reveal.js 4.x
plugins: [ RevealMarkdown, RevealNotes, RevealSearch, RevealZoom ],

// Optional libraries used to extend reveal.js
dependencies: [
]

});
</script>
</body>
</html>
